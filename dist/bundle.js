"use strict";angular.module("swapiApp",["ui.router"]).config(["$stateProvider","$urlRouterProvider",function(t,e){e.otherwise("/planets"),t.state("planets",{url:"/planets",templateUrl:"templates/planets.html",controller:"PlanetsCtrl as p"}).state("resident",{url:"/resident/:id",templateUrl:"templates/resident.html",controller:"ResidentCtrl as r"})}]);var swapiApp=angular.module("swapiApp");swapiApp.controller("PlanetsCtrl",["dataSvc",function(t){var e=this;if(this.planets=t.planets,0===this.planets.length){var s=t.getPlanets();s.then(function(s){var r=s.reduce(function(t,e){return t.concat(e.data.results)},[]);e.planets=r,t.planets=r,window.location.replace("#")},function(t){return console.error(t)})}this.residentName=t.residentName,this.extractId=function(t){return t.split("/").slice(-2)[0]}}]),swapiApp.controller("ResidentCtrl",["$stateParams","dataSvc",function(t,e){var s=this;if(this.id=t.id,this.residents=e.residents,this.residents[this.id])this.character=this.residents[this.id];else{var r=e.getCharacter(this.id);r.then(function(t){s.character=t.data,s.residents[s.id]=t.data},function(t){return console.error(t)})}}]);var swapiApp=angular.module("swapiApp");swapiApp.service("dataSvc",["$http",function(t){var e=this,s=7;this.planets=[],this.residents={},this.getPlanets=function(){for(var e=[],r=1;s>=r;r++)e.push(t.get("http://swapi.co/api/planets/?format=json&page="+r));return Promise.all(e)},this.getCharacter=function(e){return t.get("http://swapi.co/api/people/"+e+"/?format=json")},this.residentName=function(t,s){return e.residents[t]?e.residents[t].name:"resident "+s}}]);